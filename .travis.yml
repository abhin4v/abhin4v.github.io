sudo: false
services:
  - docker
branches:
  only:
  - source
env:
  global:
  - secure: "HDp64Gtrqhf9PX9yTLJ8xBvqwF6ysjeiw+3dPbyUG7i2xoF7S40TIytYGXrp8pB1gkYVsEUrhm2DpTMEGTPOZGyUdiPxFWhjybZy9APEdJTSZSiEGVoM5lulphlXMF+X6MzbSZehy2IjAeMy6WNXslQjCdPAV6G/WPv4s24mQ6kYKwMPoZj+AIYjzHKLC5ffBD0R92lEfXcYZHOv7uvowDK0gvrEbo4kKgLZSqGnPuDRtEK0zUc8e3QeOTIwd52/OVIWFOWNVUVXz2D78mrguGyehn0mkZXlDXG1DQMkcSdQkrNcBh5Gc3Sf64ZZiwmDaDtUOc27Hajj56TjK4yIoSTIGGrMICCjNUo2l5HliKavxE3S8v0UlVAkcQoow+s/BylyEFKPbhxBq9SQ9YwMItu6hpRC0TyRS7PndPwYT5cw0UWM/GhWaIdyDBvOsD7o6h/dZTtgVGLMhOvCatKAniJgpHSUL3L5hMk5IPP9Aj7KndRXFZjTeLXpB0wf+wxqMeQRKp/1rGR4zxFPnTOY/gmrmXgH+55MtJvxkYxANsceZKFQgMgM6tFrVXEThWc5JZTA+ZBTMyGDSnoXJ3R/8ob39pFSi5Ir6Z/W9OHHvMX9aelobJ4+gUef6m/QhN1r/uWdrGSvnn2hXSzBcONqHUem5iJA+xHMPDiZ5vwICuI="
  - secure: opMOZOmmHACRjDkOw5ftWSQfI2qOyzYiB1O+LCaHn5ZTRGTpfjpfXX4ldwxP/RRottEvs9XWkywvIpKOQJIENyYUebIXf7V+pGe8rBpdDBAN+9ZLGQHQ8WXEYNmCKxJ4Ewm+oN8ES75o65TfYY4CHlI25icUV5u0YcKBz+9EzTs4+/UgiE/OvNJX3xiZIwOOHk95imWVReKoilqV7hulfa+yer0wd6vWSISH7z4jikeMkcIyK9LPqYSrDvNK61PkutLJ5dZDX6aXxNuxSd5yaDtwHr28jJNlk9/b1WttrIhuYjoFXdS08BPmu+jiSx/ipvm0oTPs8deiiEdMFPxBfruaXiEAvzqBxP4x+rtLYaFsd2siUNYbT0cLdbCmlLhTa8JY+gn9K3dCfp8DYg5yjywR+dWtFQqcNQC9UB4VHXpVuFVHFfNZHKLgtxFRN7WxwzU76aXZWEzaEg2+gTzRneYOc3EdvsZmuJgpTXhJwX2lgne1lmwTt8C+cJDFvUQapZ+GvV0uLf8FLlUd21bVMxQ+a3gfKN7+YuOw3Oio5R28RKKFITY7z3MmFQIQ02wojeo1BsYpvt+Uy/A77MWZIHTWBIZpmdo79r+c6AuQT0AFVARponnxCFdOUW9729bVNC7tXrp7aLe1B4Yjg1a0qhaxEcJfSJfINjXVz3URZAs=
  - secure: Q65y2+mBJk8TGNURwhOTCgUEKkuDwykBZrn9WY/8/60grDjZh3HztsDTRZuwCn3dNVk+VKz1YGKUrPAPRKeluI+plmKNvEXHDV1U4DFNBlSbTGuaTO19En3aN/dQV4ob/eQv7s/5/eeqREYvTWSAvisMJEWV+HeV556L4KuKuADnBC2F8VAd0U2r6GAcUnHzfay6Qo1ONE3OqW3dS17v+eKRdupWxsAkLqWb0mTn3WhcmuQ+q586xK5LUDnoQR8WNBx4nGNT1CSpE1fJDMjL8XEym5ZuUDa76kiMjFOdy7dwCGGJIgwWBFgqavejgo1kZVLWMbFfoNheKDIlSrlPkvPFEBeup7+5+p61UDcrNjPcLjtQt3CPpss1efbvNzt+VHJe0l++vT/TCC5o/ZeSXvpuSOWvdJ95myrQ9Dl23xwCYt5V+CZejUz6JiWYRi2VFE2vfZOSm+uJpdnScBqtLx2H+9Zlf7oABafB547w2BPmv2fFbLvOdcGPLorFwrXxyd3hSxAFKxYyf1jjZpvx0RIP0KEEjCrA2gEVSNZATkeEMHrPCMYEc+N2hnzqOiZ6ZR/pKYC+dnLvknNkdMk6lgnJ+1+3nSdBKp4UwECGRXWSQ8dLhwQiuPRCBKmJqd051m0JI5cTZxxHik52oZDzt2qUkMg2w2Ch258mi04j8D4=
  - secure: ntjs5h6ztu5KtQzza3caqag9GLbt5Q8YDQYm7HI5mQA8NRcTvUHZQHdU0TqPYlg3dr3/Mj3wInadftzrqic6d5ddoT2pcxGQPSoit8k837TBNZ88cS/mBP/LE/BNGX0QzG8i9xbKabY0vYbIpbWp/e2ploXyYMMuEpxWgvTfNs77jAaWTihy1y6LNKlCn8buBgsEsOAzpoFFaHElD9vdeOIIuisE3sm8Ttx1p9PYvNi/Dd4Mmibfmq6MOHcI8UlxeTE9QkuboClBq6eGsd+Jce/C2DeG2Av/mA2Y8Wi9ttK9+s0pgfiraxnEJ76P4EkEkK3uBoBy8pMF9WjBRWXMMi9XOQ4xzz39a+ix5GFCkWAUUOHd6PEBH6FfX12x1OOZBipRAEfjIaMjUPSMygNSAHVTjzB3t5E2rsMwbHYtovljnvIA3sIXwN3v37TwWgQ7yfLkCCBgKftIyGLxDUpsLjTkqUeUg/+PmEBiF+80JrzEwgknTSfYLIoCySBEeYd9BEPrGUYZDQttQyAaHQWGiiAYnd1miFmNVZE3u2FZKUwL1Uo/gQmHghoquDA+YMPmn67x3FD3G8ykAgjP9JVaF6ap+A8gpu6XoF1w3toT7TzRk9NKJQxV9f1TKQe9KFH67Nohriz9SDpHUsGkJTdv8W2Vk/TMSabSJpUrVkB8nOk=
  - secure: "Wa2/KQ355TrjaJoglzA3DZ7S8bZPvnW+6Q4AU0guWjqaRqgYHH3DquLqxMHerHwtX88GdGmJYQFHZayZmnnR0ShdKLCxfClgbfwdKa48RrdzZ6BZ1GRdL6j7/f5DqSrK0eHECLlIYa9WdbjN12pKcTk7vc9zQVEgXohsVhPkxgnBRGKyMDhn1D5UA68Xoga6v3MvphsA+/6mylWsAgRUAuyUncmH44L/T08s4HH8kMUNP+Pn0ozLGq3egV4ISc2NPXlk9xxbVyZDxPwqUvxO/JrsE9NLJoA9z7mkCdWBrvskZJbt/DVIqhAI2eM37bb1ZizcGlrU8NGEdcsecwRYepDSwTSNPwQF6XUClpBnP1WwHDM8x/bwK803CQtELUGjL+/ZBGJt3y/kNOa5Vj0SQC0LEYijVLPckQvqSeBouH2hrKS8pB81McHUu+WmpYVtDTc5uti3Mzk8jfkOPsES3VTJHt4C8awboPJrRyQtpkM+VXERz6AuiAl47ZLHmjzlIcCU13Ds8At/gZcccz3pVw/8ktTjHPcE9FSpqJHB7CZ4SxSLU/V7cvrJX9nZvHQCR0hMfliWEGW9Av7vIT9dLFztpDjuGaf65EC4DoGqFXVqtyyNx/csiNiu3qa9wOBGEfQ0aIlGBlq904I9RScEGdg1IxC3ygSSSjEEyMrbBWw="
  - secure: "EEgdmDoQHVOfgOYNcQiPrtRQgkaALAMRUiYX+Eksdy1LNakawQAjsC65zV1TaI15xgNvI9LQjARI9CUemwMzjx4tUycNNUFWonlVGrk6a5t25lh7UdemcgdIsr71+isKCD0mGHUEKLWlzimVEM+vlbXLGMlCFt/+iR4Nq3bMGY5v2eunce3impW5aYPVzJpw9pUuZ16J3z5h53JpRnZST4UO7dy1djQjI+y74NWSIWH12Fa0o76EzIJxDseXlAHYlfTZwizBDkkkEdJH14NLZR9GpmC2p0CM/p0eGbpUdcmQKcNLWtQPj9C0cxsbiYvQctpRDoH+cZLLGuDZ0ab9MXi9AuFrfl01wwxwDk2FpN0TSdxR6Mo3L5Ty14VcyeQTsDk39H4u4sG9IbZEvPEyWZOxXpUB40rb6x/cQ6puV7wyyFfW9F9JBiaF3ysu0XekDH/KnO6Kcon+Gh1+8mEbrpiAoPVsvOU7R7cUInmYrlwAiklKoKcktEjbsMbIaX48YB3XjPBBKoSyJzmmdZhP7qkX7wXU6HA69OKlPyELXOh1NUwYAKZlvo0x+Lsl1QZQxpNFip14D85XJvFb7ioR5+dwVdZwW4iJXtSnO++AyIbKhJ5hjoL/NKLOa6TrmWICgqHalGo8SihiUPn7JX65KVZZPpbjrbeFGweIzPv/EFM="
  - secure: "biFl+NEINwtp0td6rNbu7/vG2uu2dWocEjeT6owBRuFQ6pAtPsX+UnZtWnWlH1ZcpZ66shF63ftts1PrtcFyPTeqIJGqwhyBmtsmqwwwF57CDQAGOWzFeAYXBHMY/CNYycLaC/mcQSjgPvlyjxAbpQ+4wWttL0W2Ep3i/7G7FyUeeyTss0GINOlmGGr6nqaE/NT2eOviBIN6V6mdW/J9Gf9M5u/yIR8ltnyqrG8jGmw3+BGr/vPgwaKf7aUYRHkCv2JdKUR6/Uyg/PrHuHKjdVa01FsUCxvTb72qIpUzS+i0WQlEMRK2xcm/LsYfHvKC8VgmtQ5BNhhRl84EhNb2W2sruJV+lu+lwLEKvh52VNlpZBy3IFEYvilexcz9XabTjXrwETkP5QtQ8Pe4n5+D8a1tAp2Bz4mriZ9CElOeECMsv2HOPEWbb3YyZfqdEaJcJ0ynD69CyQw4kG8srEHtqYn3/wNUFKUCiw3HuEF9/D3elCmRlAz5QPqH2oI+cnfO4mAOUMNBQo1Ia9834rXqFmna940jhDH20FL1lTWrzM8NMUj6UZiXflSjDUZqfmLXa/LTaS447ddJ/cl9Hg9iVb+cRNtr33f3Z7W1BcMB/PwJYPzQgI7hlMDk3RKppwYdbg1Ry2rFoNN8JzeEEsvjOp95nvAK73eaQ2cjxhK9oIg="

script:
  - docker build -t abhin4v/abhinavsarkar.net:latest --build-arg REPO_URL="$REPO_URL" --build-arg CF_ZONE_ID="$CF_ZONE_ID" --build-arg CF_API_KEY="$CF_API_KEY" --build-arg CF_EMAIL="$CF_EMAIL" --build-arg STRAVA_KEY="$STRAVA_KEY" --build-arg TRAVIS_COMMIT_MESSAGE="$TRAVIS_COMMIT_MESSAGE" .

after_success:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker push abhin4v/abhinavsarkar.net:latest
